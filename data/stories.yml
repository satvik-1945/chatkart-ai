version: "3.1"
stories:
- story: happy path greet
  steps:
    - intent: greet
    - action: utter_greet

# - story: change address when not provided initially
#   steps:
#   - intent: change_address
#   - action: utter_ask_address
#   - intent: inform
#     entities:
#       - address: "123 New Street, Mumbai"
#   - action: action_change_address

- story: Happy path for profile creation form
  steps:
  - intent: create_profile
  - action: profile_form
  - active_loop: profile_form
  - slot_was_set:
    - requested_slot: name
  - intent: inform
    entities:
    - name: "Priya Sharma"
  - action: profile_form
  - slot_was_set:
    - name: "Priya Sharma"
  - slot_was_set:
    - requested_slot: phone_number
  - intent: inform
    entities:
    - phone_number: "9876598765"
  - action: profile_form
  - slot_was_set:
    - phone_number: "9876598765"
  - slot_was_set:
    - requested_slot: address
  - intent: inform
    entities:
    - address: "123 Blossom Gardens, Bangalore"
  - action: profile_form
  - slot_was_set:
    - address: "123 Blossom Gardens, Bangalore"
  - slot_was_set:
    - requested_slot: email
  - intent: inform
    entities:
    - email: "priya.s@example.com"
  - action: profile_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: validate_profile_form

- story: User provides all profile info at once
  steps:
  - intent: create_profile
    entities:
    - name: "Satvik Tejas"
    - phone_number: "7060892798"
    - address: "546 green park bareilly"
  - action: profile_form
  - active_loop: profile_form
  - slot_was_set:
    - name: "Satvik Tejas"
  - slot_was_set:
    - phone_number: "7060892798"
  - slot_was_set:
    - address: "546 green park bareilly"
  - slot_was_set:
    - requested_slot: email
  - intent: inform
    entities:
    - email: "satvik.t@example.com"
  - action: profile_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: validate_profile_form

- story: User stops the profile form
  steps:
  - intent: create_profile
  - action: profile_form
  - active_loop: profile_form
  - intent: goodbye
  - action: utter_goodbye
  - action: action_deactivate_loop
  - active_loop: null

- story: User interrupts profile form to ask a question
  steps:
  - intent: create_profile
  - action: profile_form
  - active_loop: profile_form
  - slot_was_set:
    - requested_slot: name
  - intent: ask_llm
  - action: action_query_llm
  - action: profile_form
  - slot_was_set:
    - requested_slot: name